## 目标
- 在“系统设置”中新增并完善用户功能：修改头像、修改密码、编辑基础资料（昵称、手机号、邮箱）、通知偏好。
- 扩展现有未完成的功能项（如通知设置与家庭管理占位），保证页面非空、交互完整、表单验证齐全。

## 页面与组件
- Settings 页面分为四个子卡片组件：
  1) ProfileCard：展示与编辑昵称、手机号、邮箱；支持保存/重置。
  2) AvatarCard：头像上传与裁剪（先实现上传与预览，后续可接入裁剪）；限制图片类型与大小，调用后端上传接口或本地存储占位。
  3) PasswordCard：旧密码/新密码/确认密码，校验一致性与强度，提交后清空并反馈。
  4) NotificationCard：通知开关（站内、邮件、短信占位），持久化到用户资料或单独接口。
- 结构：在 `src/views/Settings/index.vue` 引入四个子组件，使用 Element Plus 卡片与栅格布局，响应式适配。

## 路由与导航
- 保持 `/settings` 路由不变；无须新建路由。侧边菜单入口已存在。

## API 扩展
- 在 `src/api/user.js` 增加：
  - `updateAvatar(formData)`：POST 上传头像（multipart/form-data），返回新头像 URL。
  - `changePassword({ oldPassword, newPassword })`：POST 修改密码。
  - `updateProfile({ nickname, phone, email })`：沿用已有方法，确保字段齐全。
  - `updateNotifications({ inApp, email, sms })`：POST 更新通知偏好。
- 若后端暂未准备，将提供可替代的本地模拟处理（通过 `vite-plugin-mock` 或临时前端校验 + ElMessage 提示），同时保留真实接口调用占位。

## Store 联动
- 扩展 `src/stores/user.js`：
  - `profile` 字段增加 `avatar, nickname, phone, email, notifications`。
  - 新增 actions：`fetchProfile()`, `updateProfile()`, `updateAvatar()`, `changePassword()`, `updateNotifications()`，内部调用 API 并更新本地状态。
  - 登出保留清理逻辑。

## 上传与验证
- 使用 Element Plus 的 `ElUpload`：
  - 限制 `accept="image/*"`，大小（≤2MB）、类型（jpeg/png/webp），超出提示。
  - 成功后更新 `profile.avatar` 并展示预览。
- 表单验证：
  - 手机号：`utils/validate.js` 的规则；邮箱：正则校验；密码强度与一致性：自定义校验。

## UI 交互与状态
- 全部表单支持 `loading` 与 `error` 提示，操作成功 `ElMessage.success`，失败 `ElMessage.error`。
- 按钮禁用与防重复提交，提交后重置或刷新数据。

## 家庭管理占位扩展（基础）
- 在 `src/views/Family/index.vue` 增加最小功能：
  - 列出当前家庭成员（占位列表 + 卡片 UI）；
  - 新建/加入家庭对话框（表单 + 验证 + 提交占位）；
  - 保留与后端 API 的对接点。

## 交付项
- 新增四个设置子组件文件：`ProfileCard.vue`, `AvatarCard.vue`, `PasswordCard.vue`, `NotificationCard.vue`。
- 扩展 `src/api/user.js` 与 `src/stores/user.js`。
- 更新 `src/views/Settings/index.vue` 引用与布局。
- 扩展 `src/views/Family/index.vue` 的占位功能。

## 验证
- 打开 `/settings`：四个卡片功能可用，验证与提示齐全。
- 上传头像：类型/大小限制生效，预览与 Store 更新正常。
- 修改密码：强度与一致性校验；成功提示与表单清空。
- 编辑资料与通知偏好：表单保存后刷新展示。

## 回滚
- 所有新增为增量文件与方法，若需回滚可移除子组件与关联 API/Store 方法，恢复到原 `Settings/index.vue` 基础描述布局。